# v2ray Scraper

این اسکریپت پایتون به چند کانال تلگرام متصل می‌شود و پیکربندی‌های پراکسی را از پیام‌های اخیر استخراج می‌کند، از جمله لینک‌های **V2Ray** و **MTProto**.

---

## 🚀 نصب

ابتدا مخزن را کلون کنید:

```bash
git clone https://github.com/AmirAli104/v2ray-scraper
```

یا به‌عنوان گزینه‌ی بهتر، آخرین نسخه (release) را از صفحهٔ [releases](https://github.com/AmirAli104/v2ray-scraper/releases) دانلود کنید.

وابستگی‌های لازم را نصب کنید:

```bash
pip install telethon

# اختیاری (برای پشتیبانی از کلیپ‌بورد)
pip install pyperclip

# اختیاری (برای پشتیبانی از پراکسی)
pip install pysocks
```

## ▶️ طرز استفاده

اسکریپت را اجرا کنید:

```bash
python src/v2ray-scraper.py [options]
```

بعد از اولین اجرای برنامه، از شما شماره تلفن حساب تلگرام و سایر اطلاعات ورود خواسته می‌شود. در واقع این برنامه از حساب تلگرام شما برای دسترسی به کانال‌ها استفاده می‌کند، بنابراین می‌توانید کانال‌های خصوصی را نیز به فایل channels.json اضافه کنید. این فایل را بر اساس راهنمای پیکربندی ویرایش کنید.

⚠️ هشدار: پس از ورود، فایلی با پسوند .session ایجاد می‌شود. این فایل کلید دسترسی به حساب تلگرام شماست، بنابراین لازم نیست هر بار وارد شوید. با این حال، باید فایل .session را در مکانی امن نگهداری کنید تا از دسترسی دیگران به حساب تلگرام‌تان جلوگیری شود.

## ⚙️ پیکربندی

فایل پیکربندی `channels.json` است.

* این فایل شامل موارد زیر است:

  * لیستی از کانال‌های تلگرام.
  * `api_id` و `api_hash` (برای احراز هویت با API تلگرام).
  * برای هر کانال می‌توانید مشخص کنید که چند پیام اخیر خوانده شود.

به‌طور پیش‌فرض اسکریپت از کلیدهای API تلگرام دسکتاپ استفاده می‌کند، بنابراین می‌توانید بدون تغییر مستقیم اجرا کنید. با این حال، در صورت نیاز می‌توانید آن‌ها را با `api_id` و `api_hash` خود جایگزین کنید.

## گزینه‌های خط فرمان

| گزینه                   | توضیح                                                                                |
| ----------------------- | ------------------------------------------------------------------------------------ |
| `-v,--v2ray`            | استخراج پراکسی‌های v2ray                                                             |
| `-m,--mtproto`          | استخراج پراکسی‌های mtproto                                                           |
| `-s,--session`          | نام فایل نشست (session) (پیش‌فرض: `session_name.session`)                            |
| `-n,--no-save-messages` | پیام‌های کامل کانال‌های پراکسی را در فایل ذخیره نکند                                 |
| `-f,--messages-file`    | نام فایل برای ذخیره پیام‌های کانال‌ها (پیش‌فرض: `channels_messages.txt`)             |
| `-c,--auto-copy`        | به‌صورت خودکار پراکسی‌های استخراج‌شده را در کلیپ‌بورد کپی کند                        |
| `-e,--save-extracted`   | پراکسی‌های استخراج‌شده را در یک فایل ذخیره کند                                       |
| `-p,--print-proxies`    | پیکربندی‌های پراکسی استخراج‌شده را در کنسول چاپ کند                                  |
| `-d,--disable-delay`    | تأخیر بین اتصال به کانال‌های مختلف تلگرام را غیرفعال می‌کند (توصیه نمی‌شود!)         |
| `-r, --retries`         | تعداد تلاش مجدد هنگام قطع اتصال به سرور تلگرام را تنظیم می‌کند. (پیش‌فرض: بی‌نهایت). |
| `--proxy`               | مشخص کردن پراکسی به صورت: `scheme://host:port`. پشتیبانی‌شده: HTTP، SOCKS4 و SOCKS5  |
| `-h,--help`             | نمایش پیام راهنما و خروج                                                             |

## پشتیبانی Termux

می‌توانید `v2ray-scraper` را روی اندروید با استفاده از Termux اجرا کنید. ابتدا Termux را از [F-Droid](https://f-droid.org/packages/com.termux/) دانلود کنید.
سپس مخزن را کلون کرده و پایتون را نصب کنید:

```bash
pkg install git python3
git clone https://github.com/amirali104/v2ray-scraper
```

سپس `telethon` را نصب کنید:

```bash
pip install telethon

# اختیاری (برای پشتیبانی از پراکسی)
pip install pysocks
```

اگر می‌خواهید پشتیبانی از کلیپ‌بورد داشته باشید، نمی‌توانید از `pyperclip` استفاده کنید. در عوض، باید [Termux:API](https://f-droid.org/packages/com.termux.api/) را از F-Droid نصب کرده و بستهٔ `termux-api` را در Termux نصب کنید:

```bash
pkg install termux-api
```

سپس می‌توانید آن را روی موبایل خود همانند کامپیوتر اجرا کنید.

## 📋 مثال

```bash
python src/v2ray-scraper.py -v -c -p
# استخراج پراکسی‌های V2Ray، کپی به کلیپ‌بورد، و چاپ در کنسول
```

## ⚠️ سلب مسئولیت

من هیچ‌گونه استفاده از این ابزار برای سانسور، نظارت، یا هر نوع نقض حقوق بشر را پشتیبانی نمی‌کنم.

با استفاده از این کد، شما موافقت می‌کنید که مسئولیت کامل نحوهٔ استفاده از آن را بر عهده بگیرید.
